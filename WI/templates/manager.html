<!DOCTYPE html>
<html>
    <head>
        <title>NetPolling</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="shortcut icon" href="/public/img/favicon.ico" />
        <link href="/public/bootstrap/css/bootstrap-responsive.css" media="screen" rel="stylesheet" type="text/css">
        <link href="/public/bootstrap/css/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
        <link href="/public/css/design.css" media="screen" rel="stylesheet" type="text/css">
    </head>
    <body ng-app="netpolling">
        {% block nav %}
        <nav class="navbar navbar-inverse" ng-controller="MenuCtrl">
            <div class="navbar-inner">
                <div class="container">
                    <a class="nav-collapse collapse" href="#">
                        <img src="/public/img/np_text_min.png">
                    </a>
                    <span class="nav-collapse collapse">
                            <a id="0" class="menu" role="button" class="label" >{% csrf_token %}
                                <button class="btn btn-inverse " ng-click="call(0)"><i class="icon-search icon-white"></i>Scan</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="1" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(1)"><i class="icon-screenshot icon-white"></i>Screenshot</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="2" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(2)"><i class="icon-eye-open icon-white"></i>Visualiser</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="3" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(3)"><i class="icon-th-list icon-white"></i>Journal</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="4" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(4)"><i class="icon-wrench icon-white"></i>Paramétre</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="5" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(5)"><i class="icon-off icon-white"></i>Déconnexion</button>
                            </a>
                    </span>
                    <span class="nav-collapse collapse">
                            <a id="6" class="menu" role="button" class="label">
                                <button class="btn btn-inverse" ng-click="call(6)"><i class="icon-book icon-white"></i>Aide</button>
                            </a>
                    </span>
                </div>
            </div>
        </nav>
        {% endblock %}
        {% block content %}
        <div id="main" class="bg" ng-controller="MapCtrl">
            <div id="inf" class="container">
                <div class="alert alert-[[ info.cls ]]"><button type="button" class="close" data-dismiss="alert">×</button>[[ info.why ]]</div>
            </div>
            <div id="pop">
                <div id="binfo">
                    <span class='label'>Bande passante totale utilisée : </span>
                    <ul>
                        <li class='offset1'>[[ bw.pbw ]] %</li>
                        <li class='offset1'>[[ bw.tbw ]] kb/s</li>
                    </ul>
                </div>
                <div id="tbw">
                    <div id="cbw" style="width:[[ bw.width ]]px;background-color:[[ bw.color ]]"></div>
                </div>
                <tabset>
                    <tab>
                        <tab-heading>
                            Informations
                        </tab-heading>
                        <table>
                            <tr>
                                <td>
                                    <label class="label">Hostname : </label>
                                </td>
                                <td>
                                    [[ device.hostname ]]
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="label">Device : </label>
                                </td>
                                <td>
                                    <img src="/public/img/device/[[ device.img ]].svg" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="label">IP : </label>
                                </td>
                                <td id="aip">
                                    [[ device.ip ]]
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="label">MAC : </label>
                                </td>
                                <td>
                                    [[ device.mac ]]
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="label">OS : </label>
                                </td>
                                <td>
                                    <button id="dos" class="btn btn-inverse" type="button">Détection d\'OS</button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label class="label">Bande passante : </label>
                                </td>
                                <td>
                                    [[ device.bw.percent ]]% ([[ device.bw.value ]] kb/s)
                                </td>
                            </tr>
                        </table>
                        <hr />
                        <form method="post" id="fsniff" enctype="application/x-www-form-urlencoded">
                            <div id="rsniff"></div>
                            <label for="name">Nom de l'écoute</label>
                            <input id="sname" type="text" required="true" pattern="^[A-Za-z0-9_]{1,}$" data-toggle="button" placeholder="Listen_totor"><br />
                            <label for="name">temps de l'écoute (en seconde)</label>
                            <input id="stime" type="number" required="true" pattern="^[0-9]{1,}$" data-toggle="button" placeholder="60"><br />
                            <button id ="bsniff" class="btn btn-primary" data-toggle="button">Mise en écoute</button>
                        </form>
                    </tab>
                    <tab>
                        <tab-heading>
                            OS
                        </tab-heading>

                    </tab>
                    <tab>
                        <tab-heading>
                            Recherche
                        </tab-heading>
                        <table>
                            <tr ng-repeat="i in listdevice">
                                <td>[[ i.hostname ]]</td>
                                <td>[[ i.ip ]]</td>
                            </tr>
                        </table>
                    </tab>
                </tabset>
            </div>
            <div id="move">
                <table>
                    <tr>
                        <td></td>
                        <td>
                            <i id="m0" class="mapcontroll icon-chevron-up icon-white" ng-click="move('y+')">
                        </td>
                        <td></td>
                        <td><i id="m4" class="mapcontroll icon-plus-sign icon-white" ng-click="zoom('+')"></td>
                    </tr>
                    <tr>
                        <td><i id="m1" class="mapcontroll icon-chevron-left icon-white" ng-click="move('x-')"></td>
                        <td></td>
                        <td><i id="m2" class="mapcontroll icon-chevron-right icon-white" ng-click="move('x+')"></td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>
                            <i id="m3" class="mapcontroll icon-chevron-down icon-white" ng-click="move('y-')">
                        </td>
                        <td></td>
                        <td><i id="m5" class="mapcontroll icon-minus-sign icon-white" ng-click="zoom('-')"></td>
                    </tr>
                </table>
                <div id="reset" ng-click="reset()">reset</div>
            </div>
            <n-map>

            </n-map>
            <!--<canvas id="cartoDevice" width="750" height="500"></canvas>
            <canvas id="cartoConnector"></canvas>-->
        </div>
        {% endblock %}
        {% block modal %}
        <div id="option" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="icon-remove"></i></button>

                <div id="dispopt"></div>
            </div>
        </div>
        {% endblock %}
        <!--<script src="/public/js/raphael-min.js"></script>-->
        <script src="/public/js/d3.v3.min.js"></script>
        <script src="/public/js/angular.min.js"></script>
        <script src="/public/js/angular-cookies.min.js"></script>
        <script src="/public/js/hamster.js"></script>
        <script src="/public/js/mousewheel.js"></script>
        <script src="/public/js/ui-bootstrap-tpls-0.6.0.js"></script>
        <script src="/public/js/netV2.js"></script>
    </body>
</html>